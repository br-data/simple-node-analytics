{"version":3,"file":"client.bundle.js","sources":["webpack:///webpack/bootstrap afe1409b3350e3757144","webpack:///./client/plugins/utils.js","webpack:///./client/plugins/observer.js","webpack:///./client/plugins/timer.js","webpack:///./client/analytics.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap afe1409b3350e3757144","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// Merge two objects, similar to Object.assign()\nvar merge = exports.merge = function merge(obj1, obj2) {\n\n  var result = {};\n\n  Object.keys(obj1).forEach(function (key) {\n\n    result[key] = obj1[key];\n  });\n\n  Object.keys(obj2).forEach(function (key) {\n\n    result[key] = obj2[key];\n  });\n\n  return result;\n};\n\n// Makes nothing\nvar noop = exports.noop = function noop() {};\n\n// Allows function execution only every x milliseconds\n// https://davidwalsh.name/javascript-debounce-function\nvar debounce = exports.debounce = function debounce(func, delay) {\n\n  var timer = null;\n\n  return function () {\n\n    var context = this;\n    var args = arguments;\n\n    clearTimeout(timer);\n\n    timer = setTimeout(function () {\n\n      func.apply(context, args);\n    }, delay);\n  };\n};\n\n// Makes a function only executable once\nvar once = exports.once = function once(func) {\n\n  var executed = false;\n\n  return function () {\n\n    if (!executed) {\n\n      executed = true;\n      return func.apply(this, arguments);\n    }\n  };\n};\n\n// Get device width\nvar getWidth = exports.getWidth = function getWidth() {\n\n  return parseInt(window.innerWidth > 0 ? window.innerWidth : screen.width);\n};\n\n// Generates a unique ID (good, but not RFC compliant)\n// https://gist.github.com/gordonbrander/2230317\nvar uuid = exports.uuid = function uuid() {\n\n  return Math.random().toString(36).slice(2);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/plugins/utils.js\n// module id = 0\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.add = exports.init = undefined;\n\nvar _utils = require('./utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar _config = { delay: 100 };\nvar observables = [];\n\nvar init = exports.init = function init(config) {\n\n  _config = utils.merge(_config, config || {});\n\n  var debouncedCheck = utils.debounce(check, _config.delay);\n\n  window.addEventListener('resize', debouncedCheck, false);\n  // window.addEventListener('scroll', debouncedCheck, false);\n  window.addEventListener('scroll', check, false);\n  window.addEventListener('next', check, false);\n};\n\nvar add = exports.add = function add(element, callback) {\n\n  observables.push({\n    element: element,\n    callback: callback,\n    visibility: false\n  });\n};\n\n// Check if visibility has changed\nvar check = function check() {\n\n  observables.forEach(function (obs) {\n\n    var visibility = isVisible(obs.element);\n\n    if (visibility !== obs.visibility) {\n\n      if (visibility) {\n\n        obs.callback('observer-' + obs.element.getAttribute('data-observer'));\n      }\n\n      obs.visibility = visibility;\n    }\n  });\n};\n\n// Check if element is fully visible in viewport\n// https://stackoverflow.com/a/7557433/2037629\nvar isVisible = function isVisible(element) {\n\n  var rect = element.getBoundingClientRect();\n  var page = document.querySelector('.slider').getBoundingClientRect();\n\n  return (\n    // Mobile\n    rect.right - rect.width == page.width ||\n    // Desktop\n    rect.top >= 0 && rect.left >= 0 && rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) && rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n  );\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/plugins/observer.js\n// module id = 1\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar prefixes = {};\nvar seconds = 0;\nvar timer = void 0;\nvar callback = void 0;\n\nexports.default = {\n  init: function init(_callback) {\n\n    callback = _callback || function () {};\n    prefixes = getVisabilityPrefix();\n\n    document.addEventListener(prefixes.visibilityChange, handleChange, false);\n    window.addEventListener('blur', stopTimer);\n    window.addEventListener('focus', startTimer);\n\n    startTimer();\n  }\n};\n\n\nvar handleChange = function handleChange() {\n\n  if (document[prefixes.hidden]) {\n\n    stopTimer();\n  } else {\n\n    startTimer();\n  }\n};\n\nvar startTimer = function startTimer() {\n\n  if (!timer) {\n\n    timer = setInterval(tick, 1000);\n  }\n};\n\nvar stopTimer = function stopTimer() {\n\n  clearInterval(timer);\n  timer = undefined;\n};\n\nvar tick = function tick() {\n\n  seconds++;\n\n  // Only track full minutes\n  if (seconds % 60 === 0) {\n\n    // Only track up to half an hour\n    if (seconds / 60 <= 30) {\n\n      callback('timer-' + seconds / 60 + '-minutes');\n    }\n  }\n};\n\nvar getVisabilityPrefix = function getVisabilityPrefix() {\n\n  var prefixes = {};\n\n  if (typeof document.hidden !== 'undefined') {\n\n    prefixes.hidden = 'hidden';\n    prefixes.visibilityChange = 'visibilitychange';\n  } else if (typeof document.mozHidden !== 'undefined') {\n\n    prefixes.hidden = 'mozHidden';\n    prefixes.visibilityChange = 'mozvisibilitychange';\n  } else if (typeof document.msHidden !== 'undefined') {\n\n    prefixes.hidden = 'msHidden';\n    prefixes.visibilityChange = 'msvisibilitychange';\n  } else if (typeof document.webkitHidden !== 'undefined') {\n\n    prefixes.hidden = 'webkitHidden';\n    prefixes.visibilityChange = 'webkitvisibilitychange';\n  }\n\n  return prefixes;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/plugins/timer.js\n// module id = 2\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.init = undefined;\n\nvar _utils = require('./plugins/utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nvar _observer = require('./plugins/observer');\n\nvar observer = _interopRequireWildcard(_observer);\n\nvar _timer = require('./plugins/timer');\n\nvar _timer2 = _interopRequireDefault(_timer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar _config = {\n  serviceUrl: 'http://localhost:3010/track',\n  projectId: 'demo',\n  tracker: {\n    click: true,\n    observer: true,\n    timer: true,\n    custom: true\n  }\n};\n\nvar request = void 0;\n\n// Global export for browser\nvar init = exports.init = function init(config) {\n\n  _config = utils.merge(_config, config || {});\n  _config.session = utils.uuid();\n  _config.device = utils.getWidth() > 680 ? 'desktop' : 'mobile';\n\n  registerTrackers();\n};\n\nvar registerTrackers = function registerTrackers() {\n\n  if (_config.tracker.timer) {\n\n    _timer2.default.init(send);\n  }\n\n  if (_config.tracker.click) {\n\n    var clickables = document.querySelectorAll('[data-click]');\n\n    clickables.forEach(function (element) {\n\n      var callback = utils.once(send);\n\n      element.addEventListener('click', function (event) {\n\n        var target = event.target;\n\n        if (!target.getAttribute('data-click')) {\n\n          target = target.parentNode;\n        }\n\n        callback('click-' + target.getAttribute('data-click'));\n      });\n    });\n  }\n\n  if (_config.tracker.observer) {\n\n    var observables = document.querySelectorAll('[data-observer]');\n\n    observer.init();\n\n    observables.forEach(function (obs) {\n\n      var callback = utils.once(send);\n      observer.add(obs, callback);\n    });\n  }\n\n  // @todo: Pass a function instead\n  if (_config.tracker.custom) {\n\n    send('my-custom-event');\n  }\n};\n\nvar send = function send(string, value) {\n\n  var requestBody = JSON.stringify({\n    'session': _config.session,\n    'project': _config.projectId,\n    'device': _config.device,\n    'key': string || undefined,\n    'value': value || 1\n  });\n\n  // Use sendBeacon if available ...\n  if (typeof navigator.sendBeacon == 'function') {\n\n    navigator.sendBeacon(_config.serviceUrl, requestBody);\n\n    // .. else use good ol' XMLHttpRequest\n  } else {\n\n    if (request) {\n      request.abort();\n    }\n\n    request = new XMLHttpRequest();\n    request.open('POST', _config.serviceUrl, true);\n    request.setRequestHeader('Content-Type', 'text/plain;charset=utf-8');\n    request.send(requestBody);\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/analytics.js\n// module id = 3\n// module chunks = 0"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;A","sourceRoot":""}